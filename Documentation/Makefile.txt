# Makefile ‚Äî just create / destroy the conda env
# ------------------------------------------------
# Usage:
#   make env      ‚Üê create & populate conda env
#   make install  ‚Üê pip-install into already-active env
#   make clean    ‚Üê remove the conda env

ENV_NAME   := erau_graph
PYTHON_VER := 3.9
CHANNEL    := -c conda-forge

.PHONY: env install clean

env:
	@echo "‚è≥ Creating conda env '$(ENV_NAME)' with Python $(PYTHON_VER)‚Ä¶"
	conda create -n $(ENV_NAME) python=$(PYTHON_VER) $(CHANNEL) rdkit -y
	@echo "‚úîÔ∏è  Base env ready. Installing everything else via pip‚Ä¶"
	conda run -n $(ENV_NAME) pip install -r requirements.txt
	@echo "‚úÖ Environment '$(ENV_NAME)' is all set."

install:
	@echo "‚è≥ Installing Python dependencies into current env‚Ä¶"
	pip install -r requirements.txt
	@echo "‚úÖ pip install complete."

clean:
	@echo "üóëÔ∏è  Removing conda env '$(ENV_NAME)'‚Ä¶"
	conda env remove -n $(ENV_NAME) -y
	@echo "‚úÖ Environment removed."
